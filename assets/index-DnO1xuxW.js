(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function d(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=d(o);fetch(o.href,i)}})();const v=document.getElementById("folder-list"),k=document.getElementById("add-folder-button"),L=document.getElementById("new-folder-input"),I=document.getElementById("notes-header"),b=document.getElementById("note-input-area"),h=document.getElementById("notes-list"),y=document.getElementById("save-note-button"),E=document.getElementById("note-title"),l=document.getElementById("note-body"),x=document.getElementById("cancel-note-button"),w=document.getElementById("text-counter");let s=[],r=null,g=null;function u(){localStorage.setItem("myNotesApp",JSON.stringify(s))}function C(){const t=l.value,e=t.length,d=t.trim();let n=0;d&&(n=d.split(/\s+/).length),w.textContent=`Kata: ${n} | Karakter: ${e}`}function N(){g=null,E.value="",l.value="",y.textContent="Simpan Catatan",x.classList.add("hidden"),C()}function m(){v.innerHTML="",s.forEach(t=>{const e=document.createElement("li"),d=t.id===r;e.className=`p-3 rounded-md cursor-pointer hover:bg-slate-300 flex justify-between items-center ${d?"bg-blue-200 font-bold":""}`;const n=document.createElement("span");n.textContent=t.name,n.className="flex-grow",n.dataset.folderId=t.id;const o=document.createElement("div");o.className="flex gap-2";const i=document.createElement("button");i.textContent="✏️",i.className="px-2 py-1 rounded hover:bg-slate-400",i.title="Ganti Nama Folder",i.addEventListener("click",c=>{c.stopPropagation(),F(t.id)});const a=document.createElement("button");a.textContent="🗑️",a.className="px-2 py-1 rounded hover:bg-red-500 hover:text-white",a.title="Hapus Folder",a.addEventListener("click",c=>{c.stopPropagation(),B(t.id)}),o.appendChild(i),o.appendChild(a),e.appendChild(n),e.appendChild(o),v.appendChild(e)})}function p(){const t=s.find(e=>e.id===r);if(!t){b.classList.add("hidden"),I.textContent="Pilih sebuah folder...",h.innerHTML="";return}b.classList.remove("hidden"),I.textContent=`Catatan di folder: ${t.name}`,h.innerHTML="",t.notes.length===0?h.innerHTML='<li class="text-slate-500">Belum ada catatan di folder ini.</li>':t.notes.forEach(e=>{const d=document.createElement("li");d.className="bg-white p-4 rounded-md shadow mb-3 overflow-hidden";const n=document.createElement("h3");n.className="font-bold text-lg cursor-pointer hover:text-blue-600",n.textContent=e.title;const o=document.createElement("div");o.className="mt-2 hidden";const i=document.createElement("div");i.className="text-slate-700 break-all whitespace-pre-wrap",i.innerHTML=marked.parse(e.body);const a=document.createElement("div");a.className="flex justify-end gap-2 mt-4";const c=document.createElement("button");c.textContent="Edit",c.className="bg-yellow-500 text-white font-semibold px-4 py-1 rounded-md hover:bg-yellow-600 transition-colors text-sm",c.addEventListener("click",()=>{E.value=e.title,l.value=e.body,g=e.id,y.textContent="Update Catatan",x.classList.remove("hidden"),b.scrollIntoView({behavior:"smooth"}),C()});const f=document.createElement("button");f.textContent="Hapus",f.className="bg-red-500 text-white font-semibold px-4 py-1 rounded-md hover:bg-red-600 transition-colors text-sm",f.addEventListener("click",()=>{confirm("Apakah Anda yakin ingin menghapus catatan ini?")&&A(e.id)}),n.addEventListener("click",()=>{o.classList.toggle("hidden")}),a.appendChild(c),a.appendChild(f),o.appendChild(i),o.appendChild(a),d.appendChild(n),d.appendChild(o),h.appendChild(d)})}function B(t){confirm("Apakah Anda yakin ingin menghapus folder ini beserta semua isinya? Aksi ini tidak bisa dibatalkan.")&&(s=s.filter(e=>e.id!==t),r===t&&(r=null),u(),m(),p())}function F(t){const e=s.find(n=>n.id===t);if(!e)return;const d=prompt("Masukkan nama folder baru:",e.name);d===null||d.trim()===""||(e.name=d.trim(),u(),m(),r===t&&p())}function A(t){const e=s.find(d=>d.id===r);e&&(e.notes=e.notes.filter(d=>d.id!==t),u(),p())}function S(){const t=localStorage.getItem("myNotesApp");t&&(s=JSON.parse(t)),m()}l.addEventListener("input",C);l.addEventListener("keydown",t=>{if(t.key==="Tab"){t.preventDefault();const e=l.selectionStart,d=l.selectionEnd,n="  ";l.value=l.value.substring(0,e)+n+l.value.substring(d),l.selectionStart=l.selectionEnd=e+n.length}});k.addEventListener("click",()=>{const t=L.value.trim();if(t){const e={id:Date.now(),name:t,notes:[]};s.push(e),u(),m(),L.value=""}else alert("Nama folder tidak boleh kosong!")});v.addEventListener("click",t=>{const e=t.target.dataset.folderId;e&&(r=parseInt(e),N(),m(),p())});y.addEventListener("click",()=>{const t=E.value.trim(),e=l.value.trim();if(!r){alert("Pilih folder terlebih dahulu!");return}if(!t||!e){alert("Judul dan isi catatan tidak boleh kosong!");return}const d=s.find(n=>n.id===r);if(d){if(g!==null){const n=d.notes.find(o=>o.id===g);n&&(n.title=t,n.body=e)}else{const n={id:Date.now(),title:t,body:e};d.notes.push(n)}u(),p(),N()}});x.addEventListener("click",N);S();
